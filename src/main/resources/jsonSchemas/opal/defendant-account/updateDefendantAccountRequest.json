{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Update Defendant Account Request Payload",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "comment_and_notes": {
      "$ref": "../common-objects/commentsAndNotes.json"
    },
    "enforcement_court": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enforcing_court_id": {
          "type": "integer",
          "format": "int64",
          "description": "Identifier for the enforcing court (required by TDIA)"
        },
        "court_name": {
          "type": "string",
          "description": "Optional human readable court name"
        }
      },
      "required": ["enforcing_court_id"]
    },
    "collection_order": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "collection_order": {
          "type": "boolean",
          "description": "Flag indicating if a collection order is applied to the account"
        },
        "collection_order_date": {
          "type": "string",
          "format": "date",
          "description": "The date when the collection order was applied"
        }
      },
      "required": ["collection_order"]
    },
    "enforcement_override": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enf_override_result_id": {
          "type": "string",
          "description": "Result identifier to use for the enforcement override (e.g. result code)"
        },
        "enf_override_enforcer_id": {
          "type": "integer",
          "format": "int64",
          "description": "Identifier of the enforcer used for the enforcement override"
        },
        "enf_override_tfo_lja_id": {
          "type": "integer",
          "description": "TFO / LJA identifier used for the enforcement override"
        }
      }
    }
  },
  "oneOf": [
    { "required": ["comment_and_notes"] },
    { "required": ["enforcement_court"] },
    { "required": ["collection_order"] },
    { "required": ["enforcement_override"] }
  ],
  "minProperties": 1,
  "maxProperties": 1,
  "allOf": [
    {
      "if": {
        "properties": {
          "collection_order": {
            "properties": {
              "collection_order": { "const": true }
            },
            "required": ["collection_order"]
          }
        },
        "required": ["collection_order"]
      },
      "then": {
        "properties": {
          "collection_order": {
            "required": ["collection_order_date"]
          }
        }
      }
    }
  ]
}
